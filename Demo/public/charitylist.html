<!DOCTYPE html>
<html>
	<head>
		<script src="/socket.io/socket.io.js"></script>
	</head>
	<body ng-app="myApp">
		<h2>Charity List</h2>
		
		 <!-- When user clicks on an option gets Charities  -->
		<select id="category" onchange="getCharities(this.value)">
		  <!-- Always show the 1st (default) option when page loads -->
		  <option selected="selected" style="display:none;" disabled>Select a category</option>
		  <option id="1" value="education">Education</option>
		  <option id="2" value="animal">Animal</option>
		  <option id="3" value="Environment">Environment</option>
		  <option id="4" value="Health">Health</option>
		  <option id="5" value="elder">elder</option>
		</select>
		<div id="contentHead"></div>
		<script src="/socket.io/socket.io.js"></script>
		<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
		<script src="http://code.jquery.com/jquery-1.11.1.js"></script>
		<script>
		// Processes the request for charity list
		function getCharities(val) {
			// Remove Current List
			if (document.contains(document.getElementById("content"))){
				document.getElementById("content").remove();
			}
			
			// Send to socket for server
			var socket = io();
			socket.emit('Get List', val);
		}
		</script>
		<script>
		var socket = io();
		socket.on('Reply List', function(msg){
				// No charities in selected category
				if(msg[0] == null){
					$('#contentHead').append('<div id="content"><p>There is no such charity</p></div>' + '\n');
				
				// Print charities in selected category
				}else{
					for(var i in msg){
						$('#contentHead').append('<div id="content"><p>' +
									'Name: ' + msg[i].name + '  Sector:' + msg[i].sector +
									'</p></div>' + '\n');
					}
				}
				socket.on('disconnect', function(){})
			});
		</script>
	</body>
</html>